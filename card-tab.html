<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>WhatsApp</title>
    <!-- Pipefy Client SDK -->
    <script src="https://platform.staticpipefy.com/pipefy-app.js"></script>
    <style>
        body {
            background: red; /* Fundo vermelho para f√°cil identifica√ß√£o */
            color: white;
            padding: 20px;
            margin: 0; /* Remover margem padr√£o do body */
            min-height: 100vh; /* Ocupar 100% da altura do iframe */
            display: flex; /* Usar flexbox para centralizar */
            justify-content: center; /* Centralizar horizontalmente */
            align-items: center; /* Centralizar verticalmente */
            font-family: Arial, sans-serif;
        }
        h1 {
            color: yellow;
            font-size: 50px;
            background-color: rgba(0, 0, 0, 0.5); /* Fundo semi-transparente para o H1 */
            padding: 10px 20px;
            border-radius: 8px;
            text-align: center;
            margin: 0;
        }
    </style>
</head>
<body>
    <h1 id="card-tab-title">FUNCIONOU!</h1>
    
    <script>
        console.log('üî• CARD-TAB CARREGADO E RENDERIZADO!');
        
        // Fun√ß√£o para tentar redimensionar com verifica√ß√£o de depend√™ncias
        let attempts = 0;
        const maxAttempts = 50; // 5 segundos m√°ximo (50 x 100ms)
        
        function tryResize() {
            attempts++;
            
            // Se passou do limite, tenta sem verifica√ß√£o uma vez
            if (attempts > maxAttempts) {
                console.log('‚è∞ Limite de tentativas atingido. Tentando sem verifica√ß√£o...');
                try {
                    PipefyApp.resizeTo('#card-tab-title');
                    console.log('‚úÖ PipefyApp.resizeTo aplicado sem verifica√ß√£o!');
                } catch (error) {
                    console.error('‚ùå Falha final ao tentar resizeTo:', error);
                    console.log('ü§∑ Parando tentativas. O conte√∫do deve estar vis√≠vel mesmo assim.');
                }
                return; // Para completamente
            }
            
            if (typeof PipefyApp !== 'undefined' && window.xchild && window.xprops) {
                try {
                    PipefyApp.resizeTo('#card-tab-title');
                    console.log('‚úÖ PipefyApp.resizeTo aplicado ap√≥s verifica√ß√£o de xchild/xprops!');
                } catch (error) {
                    console.error('‚ùå Erro ao chamar PipefyApp.resizeTo:', error);
                    // Tentar novamente ap√≥s 500ms se der erro
                    setTimeout(tryResize, 500);
                }
            } else {
                // S√≥ mostrar log a cada 10 tentativas para reduzir spam
                if (attempts % 10 === 0) {
                    console.log(`‚ö†Ô∏è Tentativa ${attempts}/${maxAttempts} - Aguardando xchild/xprops...`, {
                        PipefyApp: typeof PipefyApp !== 'undefined',
                        xchild: !!window.xchild,
                        xprops: !!window.xprops
                    });
                }
                setTimeout(tryResize, 100); // Tentar novamente ap√≥s 100ms
            }
        }
        
        // Iniciar a tentativa de redimensionamento
        tryResize();
    </script>
</body>
</html>