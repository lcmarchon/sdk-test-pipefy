<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WhatsApp Business App</title>
</head>
<body>
    <div style="padding: 20px; text-align: center; background: #25D366; color: white; font-family: Arial;">
        <h2>üì± Inicializando WhatsApp Business...</h2>
        <p>Conectando com Pipefy...</p>
    </div>

<!-- Pipefy Client SDK -->
<script src="https://platform.staticpipefy.com/pipefy-app.js"></script>
<script>
    console.log('üöÄ Iniciando WhatsApp Business App...');

    PipefyApp.initCall({
        // PIPE VIEW - Bot√£o e p√°gina no Pipe
        'pipe-view': function(p, pipe) {
            console.log('üìç Configurando pipe-view WhatsApp para pipe:', pipe);
            return {
                icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4f1.svg',
                text: 'WhatsApp',
                url: 'pipe-view.html',
                hide_create_button: false
            };
        },
        
        // CARD BUTTONS - Bot√µes no Card
        'card-buttons': function(p, pipe, card) {
            console.log('üì± Adicionando bot√£o WhatsApp ao card');
            return [
                {
                    icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4ac.svg',
                    text: 'Enviar WhatsApp',
                    callback: function(p) {
                        // Criar notifica√ß√£o WhatsApp
                        const notification = document.createElement('div');
                        notification.innerHTML = 'üì± Enviando via WhatsApp...';
                        notification.style.cssText = 'position:fixed;top:20px;right:20px;background:#25D366;color:white;padding:15px;border-radius:8px;z-index:9999;box-shadow:0 4px 12px rgba(0,0,0,0.3)';
                        document.body.appendChild(notification);
                        setTimeout(() => notification.remove(), 3000);
                        
                        console.log('WhatsApp enviado para card:', card);
                    }
                },
                {
                    icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4de.svg',
                    text: 'Ligar WhatsApp',
                    callback: function(p) {
                        const notification = document.createElement('div');
                        notification.innerHTML = 'üìû Iniciando chamada WhatsApp...';
                        notification.style.cssText = 'position:fixed;top:20px;right:20px;background:#128C7E;color:white;padding:15px;border-radius:8px;z-index:9999;box-shadow:0 4px 12px rgba(0,0,0,0.3)';
                        document.body.appendChild(notification);
                        setTimeout(() => notification.remove(), 3000);
                        
                        console.log('Liga√ß√£o WhatsApp iniciada para card:', card);
                    }
                }
            ];
        },
        
        // CARD BADGES - Etiquetas que aparecem NA LISTAGEM dos cards
        'card-badges': function(p, pipe, card) {
            console.log('üè∑Ô∏è Adicionando badges WhatsApp ao card');
            return [
                {
                    text: 'üì± WhatsApp',
                    color: '#25D366',
                    title: 'Contato WhatsApp Business dispon√≠vel'
                },
                {
                    text: '‚úÖ Online',
                    color: '#128C7E',
                    title: 'Status WhatsApp: Online'
                }
            ];
        },
        
        // CARD TAB - Nova aba dentro do Card
        'card-tab': function(p, pipe, card) {
            console.log('üìë Configurando aba WhatsApp do card');
            return {
                icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4f1.svg',
                title: 'WhatsApp',
                url: 'card-tab.html',
                buttons: [
                    {
                        text: 'Nova Mensagem',
                        callback: function(p) {
                            console.log('Nova mensagem WhatsApp!');
                            alert('üì± Abrindo nova mensagem WhatsApp...');
                        }
                    },
                    {
                        text: 'Hist√≥rico',
                        callback: function(p) {
                            console.log('Hist√≥rico WhatsApp solicitado!');
                            alert('üìã Carregando hist√≥rico de mensagens...');
                        }
                    }
                ]
            };
        }
    });

    console.log('‚úÖ WhatsApp Business App configurado com sucesso!');
</script>
</body>
</html>