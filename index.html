<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Task Manager Pro - Funcional</title>
</head>
<body>
    <div style="padding: 20px; text-align: center;">
        <h2>üöÄ Task Manager Pro - Vers√£o M√≠nima</h2>
        <p>App funcionando sem erros!</p>
    </div>

    <!-- Pipefy Client SDK -->
    <script src="https://platform.staticpipefy.com/pipefy-app.js"></script>
    <script>
        console.log('üöÄ Iniciando vers√£o m√≠nima');

        PipefyApp.initCall({
            // APENAS CARD BUTTONS - vers√£o super simplificada
            'card-buttons': function(p, pipe, card) {
                console.log('üé® Bot√µes b√°sicos no card');
                return [
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4dd.svg',
                        text: 'Notas',
                        callback: function(p) {
                            console.log('‚úÖ Notas clicado');
                            alert('üìù Notas funcionando!');
                        }
                    },
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/23f1.svg',
                        text: 'Timer',
                        callback: function(p) {
                            console.log('‚úÖ Timer clicado');
                            alert('‚è±Ô∏è Timer funcionando!');
                        }
                    }
                ];
            },
            
            // NOVA FUNCIONALIDADE: ABA WHATSAPP NO CARD
            'card-tab': function(p, pipe, card) {
                console.log('üéØ Card tab chamado para card:', card?.title || card?.id);
                
                // 1. N√∫mero do WhatsApp (voc√™ pode personalizar depois)
                const numeroWhatsapp = '5511999998888'; // Substitua pelo n√∫mero real
                
                // 2. Mensagem inicial usando dados do card
                const mensagemInicial = `Ol√°! Gostaria de falar sobre a tarefa: "${card?.title || 'Card #' + card?.id}" (ID: ${card?.id})`;
                
                // 3. URL do WhatsApp
                const urlWhatsapp = `https://wa.me/${numeroWhatsapp}?text=${encodeURIComponent(mensagemInicial)}`;
                
                // 4. URL da nossa aba com par√¢metro
                const urlDaAba = `./whatsapp-tab.html?url=${encodeURIComponent(urlWhatsapp)}`;
                
                // 5. Retorna configura√ß√£o da aba
                return {
                    icon: 'https://cdn.icon-icons.com/icons2/2428/PNG/512/whatsapp_logo_icon_147205.png',
                    label: 'WhatsApp',
                    url: urlDaAba
                };
            }
        });

        console.log('‚úÖ App m√≠nimo configurado');
    </script>
</body>
</html>