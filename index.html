<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Task Manager Pro - SDK Test</title>
</head>
<body>
    <div style="padding: 20px; text-align: center;">
        <h2>üöÄ Inicializando Task Manager Pro...</h2>
        <p>SDK Test funcionando!</p>
    </div>

    <!-- Pipefy Client SDK -->
    <script src="https://platform.staticpipefy.com/pipefy-app.js"></script>
    <script>
        console.log('üöÄ Iniciando Task Manager Pro...');

        PipefyApp.initCall({
            // PIPE VIEW - Bot√£o e p√°gina no Pipe
            'pipe-view': function(p, pipe) {
                console.log('üìç Configurando pipe-view para pipe:', pipe);
                return {
                    icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4ca.svg',
                    text: 'Dashboard',
                    url: 'pipe-view.html',
                    hide_create_button: false
                };
            },
            
            // CARD BUTTONS - Bot√µes no Card
            'card-buttons': function(p, pipe, card) {
                console.log('üé® Adicionando bot√µes ao card');
                return [
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4dd.svg',
                        text: 'Notas',
                        callback: function(p) {
                            // Criar uma notifica√ß√£o
                            const notification = document.createElement('div');
                            notification.innerHTML = 'üìù Abrindo notas do card!';
                            notification.style.cssText = 'position:fixed;top:20px;right:20px;background:#4CAF50;color:white;padding:15px;border-radius:5px;z-index:9999;font-family:Arial;';
                            document.body.appendChild(notification);
                            setTimeout(() => notification.remove(), 3000);
                            
                            console.log('‚úÖ Bot√£o Notas clicado para card:', card);
                        }
                    },
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/23f1.svg',
                        text: 'Timer',
                        callback: function(p) {
                            // Abre o calend√°rio do Google em nova janela
                            window.open('https://calendar.google.com/calendar/u/0/appointments/schedules/AcZssZ3eI5FttD_0iVZ_KU38Y8fOk0oi132aBDyKAcOam0bNyyd_bdNRbJmDT_ysekP5FAske0CFVM9X', '_blank');
                            
                            // Notifica√ß√£o de confirma√ß√£o
                            const notification = document.createElement('div');
                            notification.innerHTML = 'üìÖ Abrindo seu calend√°rio...';
                            notification.style.cssText = 'position:fixed;top:20px;right:20px;background:#2196F3;color:white;padding:15px;border-radius:5px;z-index:9999;font-family:Arial;';
                            document.body.appendChild(notification);
                            setTimeout(() => notification.remove(), 3000);
                            
                            console.log('‚úÖ Calend√°rio aberto:', 'Google Calendar');
                        }
                    },
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4f1.svg',
                        text: 'WhatsApp',
                        callback: function(p) {
                            console.log('‚úÖ Bot√£o WhatsApp clicado - abrindo iframe');
                            
                            // Abre modal com iframe igual ao Email nativo
                            p.modal({
                                title: 'üí¨ WhatsApp Business',
                                url: 'whatsapp-modal.html',
                                width: 700,
                                height: 500
                            });
                        }
                    }
                ];
            },
            
            // CARD BADGES - Etiquetas na listagem dos cards
            'card-badges': function(p, pipe, card) {
                console.log('üè∑Ô∏è Adicionando badges ao card');
                return [
                    {
                        text: 'Pro',
                        color: '#4CAF50',
                        title: 'Task Manager Pro'
                    },
                    {
                        text: 'üéØ',
                        color: '#FF9800',
                        title: 'Produtividade'
                    }
                ];
            },
            
            // CARD TAB - Nova aba dentro do Card
            'card-tab': function(p, pipe, card) {
                console.log('üìë Configurando aba do card');
                return {
                    icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4ca.svg',
                    title: 'Analytics',
                    url: 'card-tab.html'
                };
            },
            
            // CARD EMBED - Conte√∫do embebido direto no card
            'card-embed': function(p, pipe, card) {
                console.log('üìé Configurando embed do card');
                return {
                    title: 'üìÖ Agendamento',
                    url: 'card-embed.html',
                    height: 450 // Altura suficiente para o iframe do calend√°rio
                };
            }
        });

        console.log('‚úÖ Task Manager Pro configurado com sucesso!');
    </script>
</body>
</html>