<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Task Manager Pro - Funcional</title>
</head>
<body>
    <div style="padding: 20px; text-align: center;">
        <h2>üöÄ Task Manager Pro - Vers√£o M√≠nima</h2>
        <p>App funcionando sem erros!</p>
    </div>

    <!-- Pipefy Client SDK -->
    <script src="https://s3.amazonaws.com/pipefy-client/pipefy-client.js"></script>
    <script>
        console.log('üöÄ Iniciando com SDK correta');

        // Aguarda o SDK carregar completamente
        function initApp() {
            console.log('üîç Verificando PipefyApp:', typeof PipefyApp);
            console.log('üîç Verificando window.xprops:', typeof window.xprops);
            
            // Tenta ambas as APIs para compatibilidade
            const initMethod = window.xprops && window.xprops.initCall ? 
                window.xprops.initCall : 
                (window.PipefyApp && window.PipefyApp.initCall ? window.PipefyApp.initCall : null);
                
            if (!initMethod) {
                console.error('‚ùå Nenhuma API de inicializa√ß√£o encontrada');
                return;
            }
            
            console.log('‚úÖ API encontrada, inicializando...');
            
            initMethod({
                // APENAS CARD BUTTONS - vers√£o super simplificada
                'card-buttons': function(p, pipe, card) {
                    console.log('üé® Bot√µes b√°sicos no card');
                    return [
                        {
                            icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4dd.svg',
                            text: 'Notas',
                            callback: function(p) {
                                console.log('‚úÖ Notas clicado');
                                alert('üìù Notas funcionando!');
                            }
                        },
                        {
                            icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/23f1.svg',
                            text: 'Timer',
                            callback: function(p) {
                                console.log('‚úÖ Timer clicado');
                                alert('‚è±Ô∏è Timer funcionando!');
                            }
                        }
                    ];
                },
                
                // CARD TAB - vers√£o ultra simplificada
                'card-tab': function(p, card) {
                    console.log('üéØ Card tab chamado! SDK CORRETA');
                    console.log('üìã Par√¢metros:', {p, card});
                    
                    try {
                        const config = {
                            icon: 'https://cdn.icon-icons.com/icons2/2428/PNG/512/whatsapp_logo_icon_147205.png',
                            label: 'WhatsApp',
                            url: './whatsapp-tab.html'
                        };
                        
                        console.log('‚úÖ Config da aba:', config);
                        return config;
                        
                    } catch (error) {
                        console.error('‚ùå Erro no card-tab:', error);
                        return null;
                    }
                }
            });
        }
        
        // Inicializa√ß√£o com m√∫ltiplos fallbacks
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(initApp, 100);
            });
        } else {
            setTimeout(initApp, 100);
        }
        
        // Fallback adicional
        setTimeout(initApp, 500);
        setTimeout(initApp, 1000);
    </script>
</body>
            // APENAS CARD BUTTONS - vers√£o super simplificada
            'card-buttons': function(p, pipe, card) {
                console.log('üé® Bot√µes b√°sicos no card');
                return [
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f4dd.svg',
                        text: 'Notas',
                        callback: function(p) {
                            console.log('‚úÖ Notas clicado');
                            alert('üìù Notas funcionando!');
                        }
                    },
                    {
                        icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/23f1.svg',
                        text: 'Timer',
                        callback: function(p) {
                            console.log('‚úÖ Timer clicado');
                            alert('‚è±Ô∏è Timer funcionando!');
                        }
                    }
                ];
            },
            
            // DEBUG: ABA WHATSAPP NO CARD (vers√£o simplificada)
            'card-tab': function(p, card) {
                console.log('üéØ Card tab chamado! Vers√£o DEBUG');
                console.log('üìã Card recebido:', card);
                console.log('üéØ Card tab chamado!');
                
                try {
                    // Objeto super simples para teste
                    const tabConfig = {
                        icon: 'https://cdn.icon-icons.com/icons2/2428/PNG/512/whatsapp_logo_icon_147205.png',
                        label: 'WhatsApp',
                        url: './whatsapp-tab.html'
                    };
                    
                    console.log('‚úÖ Retornando config simples:', tabConfig);
                    return tabConfig;
                    
                } catch (error) {
                    console.error('‚ùå Erro no card-tab:', error);
                    return {
                        icon: 'https://cdn.icon-icons.com/icons2/2428/PNG/512/whatsapp_logo_icon_147205.png',
                        label: 'Debug',
                        url: './whatsapp-tab.html'
                    };
                }
            }
        });

        console.log('‚úÖ App configurado - aguardando card-tab...');
    </script>
</body>
</html>